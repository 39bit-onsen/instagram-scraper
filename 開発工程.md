# Instagram ハッシュタグスクレイパー 開発工程

> **作成日**: 2025年7月10日  
> **総開発期間**: 約15-20日（実働）  
> **開発手法**: アジャイル型段階的リリース

---

## 📊 プロジェクト概要

### 目的
Instagramのハッシュタグ情報を自動収集し、マーケティング分析に活用できるツールを開発する。非エンジニアでも使用可能なGUIを提供し、定期的なデータ収集を可能にする。

### 主要成果物
- Pythonベースのスクレイピングツール
- tkinter GUI アプリケーション
- CSV/JSON形式のデータ出力
- 運用ドキュメント一式

---

## 🗓 開発フェーズ概要

| フェーズ | 期間 | 主要タスク | 成果物 |
|---------|------|-----------|--------|
| 第1フェーズ：基盤構築 | 3-4日 | 環境構築、プロジェクト設定 | 開発環境、基本構造 |
| 第2フェーズ：コア機能 | 5-7日 | ログイン、スクレイピング実装 | CLI版動作可能 |
| 第3フェーズ：UI・運用 | 4-5日 | GUI、バッチ処理、エラー処理 | 完全版アプリ |
| 第4フェーズ：品質保証 | 3-4日 | テスト、ドキュメント作成 | リリース版 |

---

## 📝 詳細タスクリスト

### 第1フェーズ：基盤構築【優先度：高】

#### タスク1：開発環境構築
- **内容**：
  - Python 3.10+ 仮想環境作成
  - 必要ライブラリインストール（requirements.txt）
  - ChromeDriver セットアップ
- **完了条件**：`python --version`、`pip list`で環境確認OK
- **所要時間**：0.5日

#### タスク2：プロジェクト基本構造作成
- **内容**：
  ```
  project_root/
  ├─ config/
  ├─ data/
  ├─ src/
  │   ├─ ui/
  │   └─ scraper/
  ├─ cookies/
  └─ requirements.txt
  ```
- **完了条件**：ディレクトリ構造作成、.gitignore設定
- **所要時間**：0.5日

#### タスク3：Seleniumアクセス確認
- **内容**：
  - Instagramトップページへの接続テスト
  - ヘッドレス/GUI モード切替確認
  - User-Agent設定
- **完了条件**：Instagram.comの表示確認
- **所要時間**：1日

---

### 第2フェーズ：コア機能開発【優先度：高】

#### タスク4：ログイン機能実装（login.py）
- **内容**：
  - 手動ログインフロー実装
  - cookie保存機能（JSON形式）
  - cookie読込・セッション復元
  - 2段階認証対応
- **完了条件**：ログイン状態の永続化成功
- **所要時間**：1.5日

#### タスク5：ユーティリティ実装（utils.py）
- **内容**：
  ```python
  - wait_xpath() # 要素待機
  - human_sleep() # ランダム待機
  - get_selectors() # セレクタ管理
  - setup_logger() # ログ設定
  ```
- **完了条件**：各関数の単体テスト通過
- **所要時間**：1日

#### タスク6：スクレイピングコア実装（fetch_tag.py）
- **内容**：
  - ハッシュタグページアクセス
  - 投稿数取得
  - 関連タグ抽出
  - TOP投稿URL/画像URL取得
- **完了条件**：サンプルタグでデータ取得成功
- **所要時間**：2日

#### タスク7：データ保存機能
- **内容**：
  - CSV形式出力（pandas使用）
  - JSONバックアップ
  - 月別フォルダ自動作成
- **完了条件**：指定形式でのファイル出力
- **所要時間**：1日

---

### 第3フェーズ：UI・運用機能開発【優先度：中】

#### タスク8：GUI実装（tag_input_gui.py）
- **内容**：
  - tkinter入力画面
  - 実行ボタン・プログレスバー
  - 結果表示・エラーメッセージ
- **完了条件**：非エンジニアによる操作テスト合格
- **所要時間**：2日

#### タスク9：バッチ処理実装（run_batch.py）
- **内容**：
  - CSVからタグリスト読込
  - 複数タグの順次処理
  - 進捗表示（tqdm）
- **完了条件**：10タグの連続処理成功
- **所要時間**：1日

#### タスク10：エラーハンドリング強化
- **内容**：
  - cookie失効検知・再ログイン促進
  - レート制限対応（exponential backoff）
  - DOM変更検知・アラート
- **完了条件**：各エラーケースの動作確認
- **所要時間**：1.5日

#### タスク11：スケジューラ実装（scheduler.py）
- **内容**：
  - scheduleライブラリ統合
  - cron形式での設定対応
- **完了条件**：定期実行の動作確認
- **所要時間**：0.5日

---

### 第4フェーズ：品質保証・リリース準備【優先度：中-低】

#### タスク12：テスト実装
- **内容**：
  - ユニットテスト（pytest）
  - 統合テスト（E2Eシナリオ）
  - 負荷テスト（連続実行）
- **完了条件**：カバレッジ80%以上
- **所要時間**：2日

#### タスク13：運用ドキュメント作成
- **内容**：
  - 詳細セットアップガイド
  - トラブルシューティング集
  - FAQ作成
- **完了条件**：レビュー承認
- **所要時間**：1日

---

## ⚠️ リスク管理

### 技術的リスク
| リスク | 影響度 | 対策 |
|--------|--------|------|
| Instagram仕様変更 | 高 | セレクタ外部設定化、定期メンテナンス |
| アカウントブロック | 高 | 待機時間調整、リクエスト数制限 |
| cookie有効期限 | 中 | 自動検知、再ログイン通知 |

### スケジュールリスク
- **バッファ期間**：各フェーズに20%の予備日数
- **優先順位**：GUI実装を最優先（ユーザビリティ重視）

---

## 👥 開発体制

### 役割分担（1-2名想定）
- **開発者**：実装、テスト作成
- **レビュワー**：コードレビュー、動作確認
- **テスター**：非エンジニア視点でのUI確認

### コミュニケーション
- 日次進捗確認（タスク完了状況）
- 週次レビュー（フェーズ評価）

---

## ✅ 品質基準

### コーディング規約
- PEP 8準拠
- 型ヒント使用（Python 3.10+）
- docstring必須

### テスト基準
- 関数単位でのユニットテスト
- エラーケースのカバー率70%以上
- GUI操作の手動テストチェックリスト

### セキュリティ
- 認証情報の環境変数管理
- ログへの機密情報出力禁止
- 公開データのみ取得

---

## 📊 進捗管理

### マイルストーン
1. **M1**：基盤構築完了（Day 4）
2. **M2**：CLI版動作（Day 11）
3. **M3**：GUI版完成（Day 16）
4. **M4**：リリース準備完了（Day 20）

### 日次タスク
- Todoリストの更新（完了/進行中/未着手）
- ブロッカーの即時共有
- 翌日タスクの確認

---

## 🚀 リリース準備チェックリスト

- [ ] 全機能の動作確認完了
- [ ] ドキュメント一式の整備
- [ ] セットアップ手順の第三者確認
- [ ] エラー処理の網羅性確認
- [ ] パフォーマンステスト実施
- [ ] セキュリティチェック完了

---

**次のステップ**：第1フェーズのタスク1から順次着手し、開発環境構築を開始する。